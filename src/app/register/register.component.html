<div class="forms">

  <mat-card>
    <mat-card-header>
      <p class="font-size-header">{{updateRoute? "Update User Data" : "Register New User"}}</p>
    </mat-card-header>
    <mat-card-content>

      <form class="example-form" [formGroup]="signUpForm" >
        @if (updateRoute) {
          <div>
            <div class="username">
              <mat-form-field appearance="outline">
                <mat-label>User name</mat-label>
                <input matInput type="text" formControlName="name">
              </mat-form-field>
              @if (signUpForm.get('name')?.touched && signUpForm.get('name')?.invalid) {
                <div class="text-danger">
                  @if (signUpForm.get('name')?.hasError('required')) {
                    <div>User name is required</div>
                  }
                  @if (signUpForm.get('name')?.hasError('minlength')) {
                    <div>Minimum 3 characters required</div>
                  }
                  @if (signUpForm.get('name')?.hasError('maxlength')) {
                    <div>Maximum 25 characters only allowed</div>
                  }
                </div>
              }
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password">
              </mat-form-field>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput type="email" formControlName="email">
              </mat-form-field>
              @if (signUpForm.get('email')?.touched && signUpForm.get('email')?.hasError('pattern')) {
                <div class="text-danger">Please enter a Valid email</div>
              }
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Id</mat-label>
                <input matInput type="text" formControlName="id">
              </mat-form-field>
            </div>
            <div>
              <mat-form-field appearance="outline">
                <mat-label>Role</mat-label>
                <input matInput type="text" formControlName="role">
              </mat-form-field>
            </div>
            <div> is Active
              <mat-radio-group aria-label="Select an option" formControlName="isactive">
                <mat-radio-button value="yes">Yes</mat-radio-button>
                <mat-radio-button value="no">No</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
        } @else {
          <div class="username">
            <mat-form-field appearance="outline">
              <mat-label>User name</mat-label>
              <input matInput type="text" formControlName="name">
            </mat-form-field>
            @if (signUpForm.get('name')?.touched && signUpForm.get('name')?.invalid) {
              <div class="text-danger">
                @if (signUpForm.get('name')?.hasError('required')) {
                  <div>User name is required</div>
                }
                @if (signUpForm.get('name')?.hasError('minlength')) {
                  <div>Minimum 3 characters required</div>
                }
                @if (signUpForm.get('name')?.hasError('maxlength')) {
                  <div>Maximum 25 characters only allowed</div>
                }
              </div>
            }
          </div>
          <div>
            <mat-form-field appearance="outline">
              <mat-label>Password</mat-label>
              <input matInput type="password" formControlName="password">
            </mat-form-field>
          </div>
          <div>
            <mat-form-field appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput type="email" formControlName="email">
            </mat-form-field>
            @if (signUpForm.get('email')?.touched && signUpForm.get('email')?.hasError('pattern')) {
              <div class="text-danger">Please enter a Valid email</div>
            }
          </div>
          <div class="countryCode">
            <mat-form-field id="countryCode" appearance="outline">
              <input matInput type="tel" #phone formControlName="countryCode" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <input matInput type="text" formControlName="mobile" />
            </mat-form-field>
          </div>
        }


      </form>
      <div>
        <button class="login-box" color="primary"  type="submit" [disabled]="signUpForm.invalid" (click)="save(updateRoute, signUpForm.value)" mat-raised-button>{{updateRoute?"Update":"Submit"}}</button>
        <button mat-raised-button class="cancelBtn" (click)="cancel()" color="warn">cancel</button>
      </div>
      <div class="margin-top-xl">
        <p>Already a user? <a routerLink="/login">click here to login</a></p>
      </div>
    </mat-card-content>

  </mat-card>

</div>